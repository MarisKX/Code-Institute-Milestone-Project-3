{% extends "manager-dashboard/base.html" %}
{% block content %}

<div class='border-line'></div>
{% for u in user %}
    
    <a href="#" onclick=showAccount() class="waves-effect waves-light green darken-1 btn"><i class="fas fa-user left"></i>Account</a>
    <a href="#" onclick=showPassword() class="waves-effect waves-light green darken-1 btn"><i class="fas fa-key left"></i>Change Password</a>
    {% if u.settings == "yes" %}
        <a href="#" onclick=showUsers() class="waves-effect waves-light green darken-1 btn" target="_parent"><i class="fas fa-users left"></i>Users</a>
    {% else %}    
        <a href="#" class="waves-effect waves-light green darken-1 btn disabled" target="_parent"><i class="fas fa-users left"></i>Users</a>
    {% endif %}

    <h3 class="settings-heading">Settings for {{ u.username.capitalize() }}</h3>
    <table class="access-rights">
        <tr>
            <th colspan="4"><h5>Access rights</h5></th>
        </tr>
        <tr>
            <th rowspan="2" class="tooltipped" data-position="down" data-tooltip="Internal ID number of car">Actions</th>
            <th colspan="3" class="tooltipped" data-position="down" data-tooltip="Date of car being added to database">Access</th>
        </tr>
        <tr>
            <td>Create</td>
            <td>Edit</td>
            <td>Delete</td>
        </tr>
        {% if u.car_sales and u.settings and u.car_rent == "yes" %}
        <tr>
            <td>Cars for Sale</td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
        </tr>
        <tr>
            <td>Cars for Rent</td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
        </tr>
        <tr>
            <td>Users</td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>   
        </tr>
        {% elif u.car_sales and u.car_rent == "yes" and u.settings == "no" %}
        <tr>
            <td>Cars for Sale</td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Cars for Rent</td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Users</td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>   
        </tr>
        {% elif u.car_sales == "yes" and u.settings and u.car_rent == "no" %}
        <tr>
            <td>Cars for Sale</td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Cars for Rent</td>
            <td><i class="fas fa-times"></i></td> 
            <td><i class="fas fa-times"></i></td> 
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Users</td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>   
        </tr>
        {% elif u.car_rent == "yes" and u.settings and u.car_sales == "no" %}
        <tr>
            <td>Cars for Sale</td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Cars for Rent</td>
            <td><i class="fas fa-check"></i></td>
            <td><i class="fas fa-check"></i></td> 
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Users</td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>   
        </tr>
        {% else %}
        <tr>
            <td>Cars for Sale</td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Cars for Rent</td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td> 
            <td><i class="fas fa-times"></i></td>
        </tr>
        <tr>
            <td>Users</td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>
            <td><i class="fas fa-times"></i></td>   
        </tr>
        {% endif %}
    </table>

    <div class="change-password hidden">
        <h5>Change password</h5>
        <form class="col s12 m8 offset-m2 l6 offset-l3" method="POST" id="change-password" action="{{ url_for('manager_settings', username=session['user']) }}">
            <div class="row">
                <div class="input-field col s6">
                    <i class="fas fa-user-lock prefix"></i>
                    <input id="old_password" name="old_password" type="password" minlength="5"
                        maxlength="15" pattern="^[a-zA-Z0-9!@#$%^&*()]{5,15}$" class="validate" required>
                    <label for="old_password">Old Password</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s6">
                    <i class="fas fa-key prefix"></i>
                    <input id="new_password" name="new_password" type="password" minlength="5"
                        maxlength="15" pattern="^[a-zA-Z0-9!@#$%^&*()]{5,15}$" class="validate" required>
                    <label for="new_password">New Password</label>
                </div>
            </div>
            <div class="row">
                <button type="submit" class="col s10 offset-s1 btn-large text-shadow grey darken-1">
                    Change password<i class="fas fa-sign-in-alt"></i>
                </button>
            </div>
        </form>
    </div>

    <div class="users hidden">
        <h3>Users</h3>
    </div>

{% endfor %}

{% endblock %}